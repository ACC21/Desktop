<project name="freeplane" default="dist" basedir="..">
	<property name = "root" value = "."/>
	<property name = "workspace" value = ".."/>
	<property name="framework.jar" value="lib/knopflerfish/framework.jar" />
	<property name="dist" value="${root}/dist" />
	<property name="dist.jars" value="${dist}/jars" />
	<property name="dist.resources" value="${dist}/resources" />
	<property name="script" value="${root}/script" />
	<target name="dist" depends="clean">
		<ant antfile="ant/build.xml" dir="${workspace}/freeplane" inheritall="false"/>
		<ant antfile="ant/build.xml" dir="${workspace}/freeplane_help" inheritall="false"/>
		<ant antfile="ant/build.xml" dir="${workspace}/freeplane_svg" inheritall="false"/>
		<ant antfile="ant/build.xml" dir="${workspace}/freeplane_latex" inheritall="false"/>
		<ant antfile="ant/build.xml" dir="${workspace}/freeplane_script" inheritall="false"/>
		<mkdir dir="${dist}" />
		<copy todir="${dist}">
			<fileset dir="${script}"/>
			<fileset file="${framework.jar}"/>
		</copy>
		<mkdir dir="${dist.jars}" />
		<copy todir="${dist.jars}">
			<fileset dir="${workspace}/freeplane/bin/dist/osgi"/>
			<fileset dir="${workspace}/freeplane_help/bin/dist/osgi"/>
			<fileset dir="${workspace}/freeplane_latex/bin/dist/osgi"/>
			<fileset dir="${workspace}/freeplane_script/bin/dist/osgi"/>
			<fileset dir="${workspace}/freeplane_svg/bin/dist/osgi"/>
		</copy>
		<mkdir dir="${dist.resources}" />		
	</target>

	<target name="clean">
		 <delete quiet="true" includeemptydirs="true">
		    <fileset dir="${dist}" excludes="resources/**"/>
		  </delete>
	</target>
	
</project>

